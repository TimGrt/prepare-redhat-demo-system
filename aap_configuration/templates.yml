---
controller_templates:
  - name: Install Apache
    organization: Default
    job_type: run
    inventory: Workshop Inventory
    execution_environment: Default execution environment
    project: Workshop Project
    playbook: rhel/apache/apache_install.yml
    credentials:
      - Workshop Credentials
    become_enabled: true
    limit: web

  - name: Create index.html
    job_type: run
    organization: Default
    inventory: Workshop Inventory
    project: Workshop Project
    execution_environment: Default execution environment
    playbook: rhel/apache/apache_role_install.yml
    credentials:
      - Workshop Credentials
    limit: web
    become_enabled: true
    survey:
      name: survey
      description: Job template survey
      spec:
        - type: "text"
          question_name: "First Line"
          variable: first_line
          required: false
        - type: "text"
          question_name: "Second Line"
          variable: second_line
          required: false
    survey_enabled: true

  - name: Web App Deploy
    job_type: run
    organization: Default
    inventory: Workshop Inventory
    project: Webops Git Repo
    execution_environment: Default execution environment
    playbook: rhel/webops/web_infrastructure.yml
    credentials:
      - Workshop Credentials
    limit: web
    become_enabled: true

  - name: Node.js Deploy
    job_type: run
    organization: Default
    inventory: Workshop Inventory
    project: Webdev Git Repo
    execution_environment: Default execution environment
    playbook: rhel/webdev/install_node_app.yml
    credentials:
      - Workshop Credentials
    limit: web
    become_enabled: true

  - name: Create Web Content
    job_type: run
    organization: Default
    inventory: Workshop Inventory
    project: Workshop Project
    execution_environment: Default execution environment
    playbook: rhel/apache/webcontent.yml
    credentials:
      - Workshop Credentials
    extra_vars:
      dev_content: default dev content
      prod_content: default prod content
    limit: web
    become_enabled: true
    survey:
      name: survey
      description: Job template survey
      spec:
        - type: "text"
          question_name: "What should the value of dev_content be?"
          variable: dev_content
          required: false
        - type: "text"
          question_name: "What should the value of prod_content be?"
          variable: prod_content
          required: false
    survey_enabled: true
